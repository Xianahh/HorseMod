local sprites = {
  "appliances_com_01_88",
  "appliances_com_01_94",
  "appliances_laundry_01_26",
  "appliances_laundry_01_28",
  "appliances_laundry_01_27",
  "appliances_laundry_01_29",
  "camping_01_8",
  "camping_01_11",
  "camping_01_12",
  "camping_01_10",
  "camping_01_14",
  "camping_01_13",
  "carpentry_02_62",
  "carpentry_02_59",
  "carpentry_02_60",
  "carpentry_02_61",
  "carpentry_02_83",
  "constructedobjects_01_79",
  "constructedobjects_01_63",
  "constructedobjects_01_61",
  "constructedobjects_01_62",
  "constructedobjects_01_78",
  "constructedobjects_01_77",
  "constructedobjects_01_52",
  "constructedobjects_01_53",
  "constructedobjects_01_55",
  "constructedobjects_01_54",
  "construction_01_39",
  "construction_01_32",
  "construction_01_46",
  "construction_01_44",
  "construction_01_48",
  "construction_01_52",
  "construction_01_35",
  "construction_01_36",
  "construction_01_37",
  "construction_01_33",
  "construction_01_45",
  "construction_01_38",
  "construction_01_47",
  "damaged_objects_01_0",
  "damaged_objects_01_1",
  "damaged_objects_01_7",
  "damaged_objects_01_6",
  "damaged_objects_01_2",
  "damaged_objects_01_3",
  "damaged_objects_01_4",
  "damaged_objects_01_5",
  "damaged_objects_01_22",
  "electricity_pylon_11",
  "electricity_pylon_1",
  "electricity_pylon_6",
  "electricity_pylon_3",
  "electricity_pylon_181",
  "fencing_01_3",
  "fencing_01_6",
  "fencing_01_18",
  "fencing_01_36",
  "fencing_01_28",
  "fencing_01_19",
  "fencing_01_7",
  "fencing_01_43",
  "fencing_01_0",
  "fencing_01_37",
  "fencing_01_26",
  "fencing_01_1",
  "fencing_01_35",
  "fencing_01_17",
  "fencing_01_4",
  "fencing_01_5",
  "fencing_01_24",
  "fencing_01_25",
  "fencing_01_16",
  "fencing_01_106",
  "fencing_01_68",
  "fencing_01_104",
  "fencing_01_105",
  "fencing_01_107",
  "fencing_01_69",
  "fencing_01_64",
  "fencing_01_65",
  "fencing_01_66",
  "fencing_01_67",
  "fencing_01_7",
  "fencing_01_38",
  "fencing_01_14",
  "fencing_01_39",
  "fencing_01_6",
  "fencing_01_15",
  "fencing_01_102",
  "fencing_01_103",
  "fencing_01_98",
  "fencing_01_99",
  "fencing_01_96",
  "fencing_01_101",
  "fencing_01_56",
  "fencing_01_57",
  "fencing_01_58",
  "fencing_01_59",
  "features_railings_01_48",
  "features_railings_01_49",
  "features_railings_01_54",
  "features_railings_01_88",
  "features_railings_01_89",
  "features_railings_01_93",
  "fixtures_railings_01_33",
  "fixtures_railings_01_35",
  "fixtures_railings_01_24",
  "fixtures_railings_01_25",
  "furniture_seating_outdoor_01_10",
  "furniture_seating_outdoor_01_4",
  "furniture_seating_outdoor_01_6",
  "furniture_seating_outdoor_01_1",
  "furniture_seating_outdoor_01_3",
  "furniture_seating_outdoor_01_7",
  "furniture_seating_outdoor_01_13",
  "furniture_seating_outdoor_01_12",
  "furniture_seating_outdoor_01_8",
  "furniture_seating_outdoor_01_5",
  "furniture_seating_outdoor_01_2",
  "furniture_seating_outdoor_01_9",
  "furniture_seating_outdoor_01_11",
  "furniture_seating_outdoor_01_14",
  "furniture_seating_outdoor_01_0",
  "industry_railroad_05_50",
  "industry_railroad_05_49",
  "industry_railroad_05_48",
  "industry_railroad_05_51",
  "lighting_outdoor_01_1",
  "lighting_outdoor_01_17",
  "lighting_outdoor_01_2",
  "lighting_outdoor_01_3",
  "lighting_outdoor_01_0",
  "lighting_outdoor_01_16",
  "location_community_cemetary_01_31",
  "location_community_cemetary_01_39",
  "location_community_cemetary_01_37",
  "location_community_cemetary_01_36",
  "location_community_cemetary_01_38",
  "location_community_cemetary_01_23",
  "location_community_park_01_14",
  "location_community_park_01_0",
  "location_community_park_01_13",
  "location_community_park_01_1",
  "location_community_police_01_42",
  "location_community_police_01_43",
  "location_farm_accessories_01_23",
  "location_farm_accessories_01_16",
  "location_farm_accessories_01_20",
  "location_farm_accessories_01_19",
  "location_farm_accessories_01_17",
  "location_farm_accessories_01_22",
  "location_military_generic_01_63",
  "location_military_generic_01_60",
  "location_military_generic_01_59",
  "location_shop_fossil_01_56",
  "radio_tower_3",
  "radio_tower_6",
  "radio_tower_1",
  "radio_tower_11",
  "signs_miscbrands_01_104",
  "street_roadsigns_01_11",
  "street_roadsigns_01_5",
  "street_roadsigns_01_16",
  "street_roadsigns_01_48",
  "street_roadsigns_01_0",
  "street_roadsigns_01_12",
  "street_roadsigns_01_42",
  "street_roadsigns_01_10",
  "street_roadsigns_01_4",
  "street_roadsigns_01_8",
  "street_roadsigns_01_32",
  "street_roadsigns_01_41",
  "street_roadsigns_01_50",
  "street_roadsigns_01_45",
  "street_roadsigns_01_38",
  "street_roadsigns_01_36",
  "street_roadsigns_01_42",
  "street_roadsigns_01_19",
  "street_roadsigns_01_20",
  "street_roadsigns_01_18",
  "street_roadsigns_01_46",
  "street_roadsigns_01_37",
  "street_roadsigns_01_33",
  "street_roadsigns_01_51",
  "street_roadsigns_01_1",
  "street_roadsigns_01_40",
  "street_roadsigns_01_47",
  "street_roadsigns_01_35",
  "street_roadsigns_01_2",
  "street_roadsigns_01_39",
  "street_roadsigns_01_44",
  "street_roadsigns_01_34",
  "street_roadsigns_01_43",
  "street_roadsigns_01_49",
  "street_roadsigns_01_22",
  "street_decoration_01_3",
  "street_decoration_01_2",
  "street_decoration_01_1",
  "street_decoration_01_0",
  "street_decoration_01_24"
}

local function addAttachmentFlag()
    for i = 1, #sprites do
        local name = sprites[i]
        local spr = getSprite(name)
        if spr then spr:getProperties():set("CanAttachAnimal", "true") end
    end
end

local _originalAttachAnimal = ISAttachAnimalToTree.new

function ISAttachAnimalToTree:new(character, animal, tree, remove)
    local sq = tree:getSquare()
    sq:AddSpecialObject(tree)
    return _originalAttachAnimal(self, character, animal, tree, remove)
end

if isServer() then
    Events.OnGameBoot.Add(addAttachmentFlag)
else
    Events.OnGameStart.Add(addAttachmentFlag)
end